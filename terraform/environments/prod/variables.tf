# =============================================================================
# ПЕРЕМЕННЫЕ PRODUCTION ОКРУЖЕНИЯ
# =============================================================================
#
# Эти переменные настраивают production environment.
# Значения задаются в terraform.tfvars или через CLI:
#   terraform apply -var="project_name=tutors"
#
# Порядок приоритета (от низшего к высшему):
# 1. default в variable блоке
# 2. terraform.tfvars
# 3. *.auto.tfvars (в алфавитном порядке)
# 4. -var или -var-file в CLI
# 5. TF_VAR_* environment variables
# =============================================================================

# -----------------------------------------------------------------------------
# Общие настройки
# -----------------------------------------------------------------------------

variable "project_name" {
  description = <<-EOT
    Имя проекта. Используется для формирования имён всех ресурсов.
    Пример: tutors → tutors-prod-vpc, tutors-prod-alb
  EOT
  type        = string
  default     = "tutors"
}

variable "environment" {
  description = <<-EOT
    Окружение: prod, staging, dev
    Влияет на:
    - Имена ресурсов (tutors-prod-vpc vs tutors-dev-vpc)
    - Размеры инстансов (prod = больше, dev = меньше)
    - Redundancy (prod = Multi-AZ, dev = Single-AZ)
  EOT
  type        = string
  default     = "prod"
}

variable "aws_region" {
  description = <<-EOT
    AWS регион для размещения ресурсов.

    Популярные регионы:
    - eu-central-1: Франкфурт (ближе к России/СНГ)
    - eu-west-1: Ирландия (популярный европейский регион)
    - us-east-1: Вирджиния (самый большой, все сервисы доступны)

    При выборе учитывайте:
    - Latency до пользователей
    - Доступность нужных сервисов
    - Цены (могут отличаться на 10-20%)
    - Compliance требования (GDPR требует хранить данные в EU)
  EOT
  type        = string
  default     = "eu-central-1"
}

# -----------------------------------------------------------------------------
# VPC настройки (Phase 1)
# -----------------------------------------------------------------------------

variable "vpc_cidr" {
  description = <<-EOT
    CIDR блок для VPC.

    Рекомендация: используйте /16 для production.
    Это даёт достаточно адресов для роста и лёгкое деление на подсети.

    Не пересекайтесь с:
    - Другими VPC (если планируете VPC Peering)
    - On-premise сетями (если будет VPN)
    - Корпоративными сетями
  EOT
  type        = string
  default     = "10.0.0.0/16"
}

variable "create_nat_gateway" {
  description = <<-EOT
    Создавать ли NAT Gateway.

    true (рекомендуется для prod):
    - ECS контейнеры могут ходить в интернет
    - Стоимость: ~$32/месяц + трафик

    false (для экономии в dev/staging):
    - Нужны VPC Endpoints для ECR, S3, CloudWatch
    - Или размещение ECS в публичных подсетях (менее безопасно)
  EOT
  type        = bool
  default     = true
}

# -----------------------------------------------------------------------------
# Теги
# -----------------------------------------------------------------------------

variable "tags" {
  description = <<-EOT
    Дополнительные теги для всех ресурсов.
    Полезно для:
    - Cost allocation (разделение счетов по отделам)
    - Compliance (кто владелец ресурса)
    - Automation (поиск ресурсов по тегам)
  EOT
  type        = map(string)
  default     = {}
}
